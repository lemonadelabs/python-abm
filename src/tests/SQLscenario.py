'''
Created on 13/01/2015

@author: achim
'''

import uuid
import unittest
from ABM.scenario import scenario, SQLscenario, SQLBase
import datetime

from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker 
from sqlalchemy.engine.url import URL

class fromSQL(unittest.TestCase):

    def setUp(self):
        self.theUUID=uuid.uuid1()
        engine=create_engine(URL('mysql.mysqlconnector',
                                 username='simoneABM',
                                 password='awe5ome',
                                 database="ABMsimulations"))
        #engine.connect()
        SQLBase.metadata.create_all(engine) #@UndefinedVariable
        
        self.sessionmaker=sessionmaker(bind=engine)

        s=self.sessionmaker()
        s.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex).delete()
        s.commit()
        s.close()
        
    def tearDown(self):
        s=self.sessionmaker()
        s.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex).delete()
        s.commit()
        s.close()
        del s
        del self.sessionmaker
    
    def testRemovedData(self):
        session=self.sessionmaker()
        self.assertEqual(session.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex).count(), 0)
        session.close()

    def testWriteOne(self):
        session=self.sessionmaker()
        p=SQLscenario(experimentID=self.theUUID.hex, name="bla", date=datetime.datetime.now(), value=8)
        session.add(p)
        session.commit()
        session.close()
        del p, session
        
        # check whether written
        session=self.sessionmaker()
        self.assertEqual(session.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex).count(),1)
        self.assertEqual(session.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex and SQLscenario.name=="bla").count(),1)
        session.close()
        
    def testReadOne(self):
        session=self.sessionmaker()
        p=SQLscenario(experimentID=self.theUUID.hex,name="bla", date=None, type_="Int", value=8)
        q=SQLscenario(experimentID=self.theUUID.hex,name="bla", date=datetime.datetime.now(), type_="Int", value=8)
        session.add_all([p,q])
        session.commit()

        s=scenario()
        s.readFromMySQL(session, self.theUUID)
        self.assertIn("bla", s.parameters)
        self.assertIs(type(s.parameters["bla"][1][0]), int)
        self.assertIs(type(s.parameters["bla"][1][1]), int)
        
    def testReadWrite(self):
        session=self.sessionmaker()

        s=scenario()
        s.parameters["bla"]=([None],[1])
        s.writeToMySQL(session, self.theUUID)
        self.assertEqual(session.query(SQLscenario).filter(SQLscenario.experimentID==self.theUUID.hex and SQLscenario.name=="bla").count(),1)
        session.close()
        
    def testMixedIntFloat(self):
        JSONInput="""{"worldScale":{"20140601":["set",0.1],"20340701":["set",0],"initial":0},"reportingInterval":12,"propensitiesToHaveRealMe_F_0":{"initial":0.0533},"propensitiesToHaveRealMe_F_16":{"initial":0.5037},"propensitiesToHaveRealMe_F_33":{"initial":0.4932},"propensitiesToHaveRealMe_F_49":{"initial":0.403},"propensitiesToHaveRealMe_F_65":{"initial":0.2328},"propensitiesToHaveRealMe_F_80":{"initial":0.1219},"propensitiesToHaveRealMe_M_0":{"initial":0.0533},"propensitiesToHaveRealMe_M_16":{"initial":0.5037},"propensitiesToHaveRealMe_M_33":{"initial":0.4932},"propensitiesToHaveRealMe_M_49":{"initial":0.403},"propensitiesToHaveRealMe_M_65":{"initial":0.2328},"propensitiesToHaveRealMe_M_80":{"initial":0.1219},"propensitiesToGoOnline_F_49":{"initial":0.47784732585097},"propensitiesToGoOnline_M_33":{"initial":0.55438507080454},"propensitiesToGoOnline_M_80":{"initial":0.13114622615406},"propensitiesToGoOnline_M_0":{"initial":0.47904769616149},"propensitiesToGoOnline_M_16":{"initial":0.58119450613666},"propensitiesToGoOnline_F_33":{"initial":0.55438507080454},"propensitiesToGoOnline_F_0":{"initial":0.47904769616149},"propensitiesToGoOnline_M_49":{"initial":0.47664857402657},"propensitiesToGoOnline_F_65":{"initial":0.23938382777729},"propensitiesToGoOnline_F_16":{"initial":0.58530271381973},"propensitiesToGoOnline_M_65":{"initial":0.2480690122514},"propensitiesToGoOnline_F_80":{"initial":0.13114622615406},"crudeBirthRateNZ":{"initial":12.68},"inflationRateNZ":{"initial":2},"exchangeRateAUD":{"initial":1.08},"exchangeRateGBP":{"initial":1.93},"remuneration_passportOfficer_NZ":{"initial":45143.29},"remuneration_lscStaff_NZ":{"initial":41343.34},"remuneration_counterStaff_NZ":{"initial":44299.94},"remuneration_passportOfficer_UK":{"initial":29549.3},"remuneration_counterStaff_UK":{"initial":23390.3},"remuneration_lscStaff_UK":{"initial":21421.41},"remuneration_passportOfficer_AU":{"initial":61692.92},"remuneration_counterStaff_AU":{"initial":41799.34},"remuneration_lscStaff_AU":{"initial":38280.87},"onlineChannelAvailable_Adult_FirstTime":{"initial":false},"onlineChannelAvailable_Adult_Renewal":{"initial":true},"onlineChannelAvailable_Adult_Replacement":{"initial":true},"onlineChannelAvailable_Child_FirstTime":{"initial":false},"onlineChannelAvailable_Child_Renewal":{"initial":false},"onlineChannelAvailable_Child_Replacement":{"initial":false},"staffNo_passportOfficer_NZ":{"initial":91},"staffNo_lscStaff_NZ":{"initial":34},"staffNo_counterStaff_NZ":{"initial":34},"staffNo_passportOfficer_AU":{"initial":17},"staffNo_lscStaff_AU":{"initial":0},"staffNo_counterStaff_AU":{"initial":0},"staffNo_passportOfficer_UK":{"initial":9},"staffNo_lscStaff_UK":{"initial":0},"staffNo_counterStaff_UK":{"initial":0},"timing_Adult_Renewal_NZ_mail_digitize_avg":{"initial":255.6},"timing_Adult_Renewal_NZ_f2f_digitize_avg":{"initial":255.6},"timing_Adult_Replacement_NZ_mail_digitize_avg":{"initial":379.2},"timing_Adult_Replacement_NZ_f2f_digitize_avg":{"initial":365.4},"timing_Adult_FirstTime_NZ_mail_digitize_avg":{"initial":379.2},"timing_Adult_FirstTime_NZ_f2f_digitize_avg":{"initial":365.4},"timing_Child_Renewal_NZ_mail_digitize_avg":{"initial":365.4},"timing_Child_Renewal_NZ_f2f_digitize_avg":{"initial":365.4},"timing_Child_Replacement_NZ_mail_digitize_avg":{"initial":365.4},"timing_Child_Replacement_NZ_f2f_digitize_avg":{"initial":365.4},"timing_Child_FirstTime_NZ_mail_digitize_avg":{"initial":365.4},"timing_Child_FirstTime_NZ_f2f_digitize_avg":{"initial":365.4},"timing_Adult_Renewal_NZ_mail_datarepair_avg":{"initial":124.2},"timing_Adult_Renewal_NZ_f2f_datarepair_avg":{"initial":124.2},"timing_Adult_Replacement_NZ_mail_datarepair_avg":{"initial":227.4},"timing_Adult_Replacement_NZ_f2f_datarepair_avg":{"initial":227.4},"timing_Adult_FirstTime_NZ_mail_datarepair_avg":{"initial":227.4},"timing_Adult_FirstTime_NZ_f2f_datarepair_avg":{"initial":227.4},"timing_Child_Renewal_NZ_mail_datarepair_avg":{"initial":227.4},"timing_Child_Renewal_NZ_f2f_datarepair_avg":{"initial":227.4},"timing_Child_Replacement_NZ_mail_datarepair_avg":{"initial":227.4},"timing_Child_Replacement_NZ_f2f_datarepair_avg":{"initial":227.4},"timing_Child_FirstTime_NZ_mail_datarepair_avg":{"initial":227.4},"timing_Child_FirstTime_NZ_f2f_datarepair_avg":{"initial":227.4},"timing_Adult_Renewal_NZ_online_processImage_avg":{"initial":120},"timing_Adult_Renewal_NZ_mail_processImage_avg":{"initial":120},"timing_Adult_Renewal_NZ_f2f_processImage_avg":{"initial":120},"timing_Adult_Replacement_NZ_online_processImage_avg":{"initial":120},"timing_Adult_Replacement_NZ_mail_processImage_avg":{"initial":120},"timing_Adult_Replacement_NZ_f2f_processImage_avg":{"initial":120},"timing_Adult_FirstTime_NZ_online_processImage_avg":{"initial":120},"timing_Adult_FirstTime_NZ_mail_processImage_avg":{"initial":120},"timing_Adult_FirstTime_NZ_f2f_processImage_avg":{"initial":120},"timing_Child_Renewal_NZ_online_processImage_avg":{"initial":120},"timing_Child_Renewal_NZ_mail_processImage_avg":{"initial":120},"timing_Child_Renewal_NZ_f2f_processImage_avg":{"initial":120},"timing_Child_Replacement_NZ_online_processImage_avg":{"initial":120},"timing_Child_Replacement_NZ_mail_processImage_avg":{"initial":120},"timing_Child_Replacement_NZ_f2f_processImage_avg":{"initial":120},"timing_Child_FirstTime_NZ_online_processImage_avg":{"initial":120},"timing_Child_FirstTime_NZ_mail_processImage_avg":{"initial":120},"timing_Child_FirstTime_NZ_f2f_processImage_avg":{"initial":120},"timing_Adult_Renewal_NZ_online_resolveIssues_avg":{"initial":340.2},"timing_Adult_Renewal_NZ_mail_resolveIssues_avg":{"initial":378},"timing_Adult_Renewal_NZ_f2f_resolveIssues_avg":{"initial":340.2},"timing_Adult_Replacement_NZ_online_resolveIssues_avg":{"initial":340.2},"timing_Adult_Replacement_NZ_mail_resolveIssues_avg":{"initial":378},"timing_Adult_Replacement_NZ_f2f_resolveIssues_avg":{"initial":340.2},"timing_Adult_FirstTime_NZ_online_resolveIssues_avg":{"initial":912},"timing_Adult_FirstTime_NZ_mail_resolveIssues_avg":{"initial":1014},"timing_Adult_FirstTime_NZ_f2f_resolveIssues_avg":{"initial":912},"timing_Child_Renewal_NZ_online_resolveIssues_avg":{"initial":340.2},"timing_Child_Renewal_NZ_mail_resolveIssues_avg":{"initial":882},"timing_Child_Renewal_NZ_f2f_resolveIssues_avg":{"initial":340.2},"timing_Child_Replacement_NZ_online_resolveIssues_avg":{"initial":797.4},"timing_Child_Replacement_NZ_mail_resolveIssues_avg":{"initial":882},"timing_Child_Replacement_NZ_f2f_resolveIssues_avg":{"initial":797.4},"timing_Child_FirstTime_NZ_online_resolveIssues_avg":{"initial":797.4},"timing_Child_FirstTime_NZ_mail_resolveIssues_avg":{"initial":882},"timing_Child_FirstTime_NZ_f2f_resolveIssues_avg":{"initial":797.4},"timing_Adult_Renewal_NZ_online_clarifyErrors_avg":{"initial":340.2},"timing_Adult_Renewal_NZ_mail_clarifyErrors_avg":{"initial":378},"timing_Adult_Renewal_NZ_f2f_clarifyErrors_avg":{"initial":340.2},"timing_Adult_Replacement_NZ_online_clarifyErrors_avg":{"initial":340.2},"timing_Adult_Replacement_NZ_mail_clarifyErrors_avg":{"initial":378},"timing_Adult_Replacement_NZ_f2f_clarifyErrors_avg":{"initial":340.2},"timing_Adult_FirstTime_NZ_online_clarifyErrors_avg":{"initial":912},"timing_Adult_FirstTime_NZ_mail_clarifyErrors_avg":{"initial":1014},"timing_Adult_FirstTime_NZ_f2f_clarifyErrors_avg":{"initial":912},"timing_Child_Renewal_NZ_online_clarifyErrors_avg":{"initial":797.4},"timing_Child_Renewal_NZ_mail_clarifyErrors_avg":{"initial":882},"timing_Child_Renewal_NZ_f2f_clarifyErrors_avg":{"initial":797.4},"timing_Child_Replacement_NZ_online_clarifyErrors_avg":{"initial":797.4},"timing_Child_Replacement_NZ_mail_clarifyErrors_avg":{"initial":882},"timing_Child_Replacement_NZ_f2f_clarifyErrors_avg":{"initial":797.4},"timing_Child_FirstTime_NZ_online_clarifyErrors_avg":{"initial":797.4},"timing_Child_FirstTime_NZ_mail_clarifyErrors_avg":{"initial":882},"timing_Child_FirstTime_NZ_f2f_clarifyErrors_avg":{"initial":797.4},"timing_Adult_Renewal_NZ_online_issuePassport_avg":{"initial":270},"timing_Adult_Renewal_NZ_mail_issuePassport_avg":{"initial":270},"timing_Adult_Renewal_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Adult_Replacement_NZ_online_issuePassport_avg":{"initial":270},"timing_Adult_Replacement_NZ_mail_issuePassport_avg":{"initial":270},"timing_Adult_Replacement_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Adult_FirstTime_NZ_online_issuePassport_avg":{"initial":270},"timing_Adult_FirstTime_NZ_mail_issuePassport_avg":{"initial":270},"timing_Adult_FirstTime_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Child_Renewal_NZ_online_issuePassport_avg":{"initial":270},"timing_Child_Renewal_NZ_mail_issuePassport_avg":{"initial":270},"timing_Child_Renewal_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Child_Replacement_NZ_online_issuePassport_avg":{"initial":270},"timing_Child_Replacement_NZ_mail_issuePassport_avg":{"initial":270},"timing_Child_Replacement_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Child_FirstTime_NZ_online_issuePassport_avg":{"initial":270},"timing_Child_FirstTime_NZ_mail_issuePassport_avg":{"initial":270},"timing_Child_FirstTime_NZ_f2f_issuePassport_avg":{"initial":270},"timing_Adult_Renewal_NZ_f2f_serveAtCounter_avg":{"initial":277.8},"timing_Adult_Replacement_NZ_f2f_serveAtCounter_avg":{"initial":354},"timing_Adult_FirstTime_NZ_f2f_serveAtCounter_avg":{"initial":354},"timing_Child_Renewal_NZ_f2f_serveAtCounter_avg":{"initial":217.8},"timing_Child_Replacement_NZ_f2f_serveAtCounter_avg":{"initial":217.8},"timing_Child_FirstTime_NZ_f2f_serveAtCounter_avg":{"initial":217.8},"timing_Adult_Renewal_NZ_f2f_acceptApplication_avg":{"initial":60},"timing_Adult_Replacement_NZ_f2f_acceptApplication_avg":{"initial":60},"timing_Adult_FirstTime_NZ_f2f_acceptApplication_avg":{"initial":60},"timing_Child_Renewal_NZ_f2f_acceptApplication_avg":{"initial":60},"timing_Child_Replacement_NZ_f2f_acceptApplication_avg":{"initial":60},"timing_Child_FirstTime_NZ_f2f_acceptApplication_avg":{"initial":60},"passportValidity":{"initial":5},"price_Adult_FirstTime_standard_NZ_paper":{"20150701":["set","140.98"],"20160701":["set","140.98"],"20170701":["set","140.98"],"20180701":["set","140.98"],"20190701":["set","140.98"],"20200701":["set","140.98"],"20210701":["set","140.98"],"20220701":["set","140.98"],"20230701":["set","140.98"],"20240701":["set","140.98"],"20250701":["set","140.98"],"20260701":["set","140.98"],"20270701":["set","140.98"],"20280701":["set","140.98"],"20290701":["set","140.98"],"20300701":["set","140.98"],"20310701":["set","140.98"],"20320701":["set","140.98"],"20330701":["set","140.98"],"20340701":["set","140.98"],"initial":140},"price_Adult_FirstTime_urgent_NZ_paper":{"initial":293.3},"price_Adult_Replacement_standard_NZ_paper":{"initial":134.5},"price_Adult_Replacement_urgent_NZ_paper":{"initial":287.8},"price_Adult_Renewal_standard_NZ_paper":{"initial":134.5},"price_Adult_Renewal_urgent_NZ_paper":{"initial":287.5},"price_Child_FirstTime_standard_NZ_paper":{"initial":81.7},"price_Child_FirstTime_urgent_NZ_paper":{"20150701":["set","235.34"],"20160701":["set","235.34"],"20170701":["set","235.34"],"20180701":["set","235.34"],"20190701":["set","235.34"],"20200701":["set","235.34"],"20210701":["set","235.34"],"20220701":["set","235.34"],"20230701":["set","235.34"],"20240701":["set","235.34"],"20250701":["set","235.34"],"20260701":["set","235.34"],"20270701":["set","235.34"],"20280701":["set","235.34"],"20290701":["set","235.34"],"20300701":["set","235.34"],"20310701":["set","235.34"],"20320701":["set","235.34"],"20330701":["set","235.34"],"20340701":["set","235.34"],"initial":235},"price_Child_Replacement_standard_NZ_paper":{"initial":81.7},"price_Child_Replacement_urgent_NZ_paper":{"initial":235},"price_Child_Renewal_standard_NZ_paper":{"initial":81.7},"price_Child_Renewal_urgent_NZ_paper":{"initial":235},"price_Adult_FirstTime_standard_AU_paper":{"initial":162},"price_Adult_FirstTime_urgent_AU_paper":{"initial":234},"price_Adult_Replacement_standard_AU_paper":{"initial":162},"price_Adult_Replacement_urgent_AU_paper":{"initial":234},"price_Adult_Renewal_standard_AU_paper":{"initial":162},"price_Adult_Renewal_urgent_AU_paper":{"initial":234},"price_Child_FirstTime_standard_AU_paper":{"initial":83},"price_Child_FirstTime_urgent_AU_paper":{"initial":245},"price_Child_Replacement_standard_AU_paper":{"initial":83},"price_Child_Replacement_urgent_AU_paper":{"initial":245},"price_Child_Renewal_standard_AU_paper":{"initial":83},"price_Child_Renewal_urgent_AU_paper":{"initial":245},"price_Adult_FirstTime_standard_UK_paper":{"initial":91},"price_Adult_FirstTime_urgent_UK_paper":{"initial":182},"price_Adult_Replacement_standard_UK_paper":{"initial":91},"price_Adult_Replacement_urgent_UK_paper":{"initial":182},"price_Adult_Renewal_standard_UK_paper":{"initial":91},"price_Adult_Renewal_urgent_UK_paper":{"initial":182},"price_Child_FirstTime_standard_UK_paper":{"initial":47},"price_Child_FirstTime_urgent_UK_paper":{"initial":138},"price_Child_Replacement_standard_UK_paper":{"initial":47},"price_Child_Replacement_urgent_UK_paper":{"initial":138},"price_Child_Renewal_standard_UK_paper":{"initial":47},"price_Child_Renewal_urgent_UK_paper":{"initial":138},"price_Adult_FirstTime_standard_NZ_online":{"initial":124.5},"price_Adult_FirstTime_urgent_NZ_online":{"initial":293.3},"price_Adult_Replacement_standard_NZ_online":{"initial":124.5},"price_Adult_Replacement_urgent_NZ_online":{"initial":287.8},"price_Adult_Renewal_standard_NZ_online":{"initial":124.5},"price_Adult_Renewal_urgent_NZ_online":{"initial":287.5},"price_Child_FirstTime_standard_NZ_online":{"initial":124.5},"price_Child_FirstTime_urgent_NZ_online":{"initial":124.5},"price_Child_Replacement_standard_NZ_online":{"initial":124.5},"price_Child_Replacement_urgent_NZ_online":{"initial":124.5},"price_Child_Renewal_standard_NZ_online":{"initial":124.5},"price_Child_Renewal_urgent_NZ_online":{"initial":124.5},"price_Adult_FirstTime_standard_AU_online":{"initial":108.26},"price_Adult_FirstTime_urgent_AU_online":{"initial":234},"price_Adult_Replacement_standard_AU_online":{"initial":108.26},"price_Adult_Replacement_urgent_AU_online":{"initial":234},"price_Adult_Renewal_standard_AU_online":{"initial":108.26},"price_Adult_Renewal_urgent_AU_online":{"initial":234},"price_Child_FirstTime_standard_AU_online":{"initial":108.26},"price_Child_FirstTime_urgent_AU_online":{"initial":108.26},"price_Child_Replacement_standard_AU_online":{"initial":108.26},"price_Child_Replacement_urgent_AU_online":{"initial":108.26},"price_Child_Renewal_standard_AU_online":{"initial":108.26},"price_Child_Renewal_urgent_AU_online":{"initial":108.26},"price_Adult_FirstTime_standard_UK_online":{"initial":108.26},"price_Adult_FirstTime_urgent_UK_online":{"initial":182},"price_Adult_Replacement_standard_UK_online":{"initial":108.26},"price_Adult_Replacement_urgent_UK_online":{"initial":182},"price_Adult_Renewal_standard_UK_online":{"initial":108.26},"price_Adult_Renewal_urgent_UK_online":{"initial":182},"price_Child_FirstTime_standard_UK_online":{"initial":108.26},"price_Child_FirstTime_urgent_UK_online":{"initial":108.26},"price_Child_Replacement_standard_UK_online":{"initial":108.26},"price_Child_Replacement_urgent_UK_online":{"initial":108.26},"price_Child_Renewal_standard_UK_online":{"initial":108.26},"price_Child_Renewal_urgent_UK_online":{"initial":108.26},"netMigrationCitizens_NZ_AU":{"initial":8107},"netMigrationCitizens_NZ_UK":{"initial":-407},"immigrationNZ":{"initial":27895},"propensitiesToTravel_LongTerm_M_0":{"initial":0.01399225505},"propensitiesToTravel_LongTerm_M_16":{"initial":0.03797399942},"propensitiesToTravel_LongTerm_M_33":{"initial":0.01353108176},"propensitiesToTravel_LongTerm_M_49":{"initial":0.00641665534},"propensitiesToTravel_LongTerm_M_65":{"initial":0.00267285232},"propensitiesToTravel_LongTerm_M_80":{"initial":0.00267285232},"propensitiesToTravel_LongTerm_F_0":{"initial":0.011393862101},"propensitiesToTravel_LongTerm_F_16":{"initial":0.03821494815},"propensitiesToTravel_LongTerm_F_33":{"initial":0.01357812712},"propensitiesToTravel_LongTerm_F_49":{"initial":0.00700270942},"propensitiesToTravel_LongTerm_F_65":{"initial":0.00279709349},"propensitiesToTravel_LongTerm_F_80":{"initial":0.00279709349},"propensitiesToTravel_Holiday_M_0":{"initial":0.1216596124},"propensitiesToTravel_Holiday_M_16":{"initial":0.1904940327},"propensitiesToTravel_Holiday_M_33":{"initial":0.1960842767},"propensitiesToTravel_Holiday_M_49":{"initial":0.2492797034},"propensitiesToTravel_Holiday_M_65":{"initial":0.217339672},"propensitiesToTravel_Holiday_M_80":{"initial":0.217339672},"propensitiesToTravel_Holiday_F_0":{"initial":0.1230329798},"propensitiesToTravel_Holiday_F_16":{"initial":0.2203725826},"propensitiesToTravel_Holiday_F_33":{"initial":0.2351564832},"propensitiesToTravel_Holiday_F_49":{"initial":0.2812592604},"propensitiesToTravel_Holiday_F_65":{"initial":0.216202659},"propensitiesToTravel_Holiday_F_80":{"initial":0.216202659},"propensitiesToTravel_Business_M_0":{"initial":0.0007920105},"propensitiesToTravel_Business_M_16":{"initial":0.06150234615},"propensitiesToTravel_Business_M_33":{"initial":0.1945743528},"propensitiesToTravel_Business_M_49":{"initial":0.179179198},"propensitiesToTravel_Business_M_65":{"initial":0.04812775187},"propensitiesToTravel_Business_M_80":{"initial":0.04812775187},"propensitiesToTravel_Business_F_0":{"initial":0.00063046617},"propensitiesToTravel_Business_F_16":{"initial":0.02958863743},"propensitiesToTravel_Business_F_33":{"initial":0.06035071572},"propensitiesToTravel_Business_F_49":{"initial":0.03648102219},"propensitiesToTravel_Business_F_65":{"initial":0.00948322239},"propensitiesToTravel_Business_F_80":{"initial":0.00948322239},"propensitiesToTravel_visitFamily_M_0":{"initial":0.1108898571},"propensitiesToTravel_visitFamily_M_16":{"initial":0.1571747134},"propensitiesToTravel_visitFamily_M_33":{"initial":0.1517047402},"propensitiesToTravel_visitFamily_M_49":{"initial":0.1943463584},"propensitiesToTravel_visitFamily_M_65":{"initial":0.1961899769},"propensitiesToTravel_visitFamily_M_80":{"initial":0.1961899769},"propensitiesToTravel_visitFamily_F_0":{"initial":0.1083712883},"propensitiesToTravel_visitFamily_F_16":{"initial":0.2057154805},"propensitiesToTravel_visitFamily_F_33":{"initial":0.1933678873},"propensitiesToTravel_visitFamily_F_49":{"initial":0.2897143921},"propensitiesToTravel_visitFamily_F_65":{"initial":0.2424840162},"propensitiesToTravel_visitFamily_F_80":{"initial":0.2424840162}}"""
        
        s=scenario()
        s.readFromJSON(JSONInput)
        for k, arrays in s.parameters.items():
            if len(arrays[0])<2:
                continue
            valueTypes=[type(v) for v in arrays[1]]
            self.assertIs(valueTypes[0], valueTypes[1], 'error in %s'%k)